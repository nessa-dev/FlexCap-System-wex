@model FlexCap.Web.Models.Account.CadastroModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = "Create Account";
    Layout = null;
}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <title>Criar Conta</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="~/css/Cadastro.css" asp-append-version="true" />

</head>
<body>
    <div class="container-fluid min-vh-100 d-flex justify-content-center align-items-center position-relative">

        <a href="/Login" class="text-white text-decoration-none position-absolute top-0 start-0" style="margin-top:20px; margin-left:20px;">
            <i class="bi bi-arrow-left me-2" style="color: #FFD700;"></i> Back
        </a>

        <div class="col-12 col-sm-8 col-md-6 col-lg-4">
            <div class="form-card">
                <div class="text-center mb-4">
                    <h2 class="mb-3">Create Account</h2>
                </div>

                <form asp-controller="Cadastro" asp-action="Cadastro" method="post" enctype="multipart/form-data">

                    @Html.AntiForgeryToken()

                    <div class="text-center mb-4">
                        <label id="avatarClickTarget" class="d-inline-block" style="cursor: pointer;">
                            <div id="profileAvatarContainer"
                                 style="background-color: #ffffff; border-radius: 50%; padding: 0; display: inline-block; line-height: 1; overflow: hidden; width: 100px; height: 100px;">

                                <img id="profileImagePreview" src="#" alt="Preview"
                                     style="display:none; width: 100%; height: 100%; object-fit: cover; border-radius: 50%;" />

                                <i class="bi bi-person-plus-fill" id="profileIcon"
                                   style="font-size: 5rem; color: #001f4c; padding: 10px;"></i>
                            </div>
                        </label>


                        <input asp-for="ProfilePhotoFile" type="file" id="profilePhotoInput" accept="image/*" class="d-none" />
                        <span asp-validation-for="ProfilePhotoFile" class="text-danger d-block"></span>
                    </div>

                    <input asp-for="FullName" class="form-control mb-2" placeholder="Full Name" />
                    <span asp-validation-for="FullName" class="text-danger d-block"></span>

                    <input asp-for="EmailAddress" class="form-control mb-2" placeholder="E-mail Address" />
                    <span asp-validation-for="EmailAddress" class="text-danger d-block"></span>

                    <input asp-for="Position" class="form-control mb-2" placeholder="Position" />
                    <span asp-validation-for="Position" class="text-danger d-block"></span>

                    <select asp-for="Department" class="form-select mb-2">
                        <option value="" selected>Department</option>
                        <option value="Benefits">Benefits</option>
                        <option value="Mobility">Mobility</option>
                        <option value="Corporate Payments">Corporate Payments</option>
                    </select>
                    <span asp-validation-for="Department" class="text-danger d-block"></span>

                    <select asp-for="CountryOfOperation" class="form-select mb-2">
                        <option value="" selected>Country of Operation</option>
                        <option value="BR">Brazil</option>
                        <option value="US">United States</option>
                        <option value="IT">Italy</option>
                        <option value="CA">Canada</option>
                        <option value="JP">Japan</option>
                    </select>
                    <span asp-validation-for="CountryOfOperation" class="text-danger d-block"></span>

                    <select asp-for="Team" class="form-select mb-2">
                        <option value="">Select Team</option>
                        <option value="Code Warriors">Code Warriors</option>
                        <option value="Bug Busters">Bug Busters</option>
                        <option value="Titans">Titans</option>
                        <option value="Pixel Pioneers">Pixel Pioneers</option>
                        <option value="Cloud Crusaders">Cloud Crusaders</option>
                        <option value="Dev Dynamos">Dev Dynamos</option>
                    </select>
                    <span asp-validation-for="Team" class="text-danger d-block"></span>

                    <input asp-for="Password" class="form-control mb-3" type="password" placeholder="Create Password" />
                    <span asp-validation-for="Password" class="text-danger d-block"></span>

                    <button type="submit" class="btn btn-success-custom w-100">Create Account</button>
                </form>
            </div>
        </div>

        <div class="position-absolute bottom-0 start-0 m-3">
            <img src="~/img/logo.png" alt="FlexCap Logo" class="logo-footer-img" />
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation-unobtrusive@4.0.0/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>


    <script>
        $(document).ready(function () {
            const $profilePhotoInput = $('#profilePhotoInput');
            const $profileImagePreview = $('#profileImagePreview');
            const $profileIcon = $('#profileIcon');
            const $profileAvatarContainer = $('#profileAvatarContainer');

            $('#avatarClickTarget').on('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                $profilePhotoInput.trigger('click');
            });

            $profilePhotoInput.on('change', function () {
                const file = this.files[0];

                if (file) {
                    const reader = new FileReader();

                    reader.onload = function (e) {
                        $profileImagePreview.attr('src', e.target.result);

                        $profileIcon.hide();
                        $profileImagePreview.show();

                        $profileAvatarContainer.css('padding', '0');
                        $profileAvatarContainer.css({ 'width': '100px', 'height': '100px' }); 
                    };

                    reader.readAsDataURL(file);
                } else {
                    $profileImagePreview.hide();
                    $profileIcon.show();
                    $profileAvatarContainer.css('padding', '10px');
                }
            });
        });
    </script>
</body>
</html>