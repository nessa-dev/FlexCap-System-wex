<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlexCap</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link rel="stylesheet" href="~/css/Template.css" asp-append-version="true" />
</head>
<body class="d-flex">
    @{
        var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
        var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
        var isAuthenticated = User?.Identity?.IsAuthenticated == true;
        var currentProfile = ViewData["Profile"]?.ToString() ?? (isAuthenticated ? "Colaborador" : null);
    }

    <div class="sidebar">
        <div>
            <div class="p-3 text-center">
                <img src="~/img/logo.png" alt="FlexCap Logo" class="img-fluid">
            </div>

            <a asp-controller="Home" asp-action="@currentProfile" class="menu-item @(currentController == "Home" ? "active" : "")">
                <span class="material-icons">home</span> Home
            </a>

            @if (currentProfile == "Manager")
            {
                <a asp-controller="Colaboradores" asp-action="Manager" class="menu-item action @(currentController == "Colaboradores" ? "active" : "")">
                    <span class="material-icons">people</span> Collaborators
                </a>
                <a asp-controller="Sprint" asp-action="Manager" class="menu-item action @(currentController == "Sprint" ? "active" : "")">
                    <span class="material-icons">timeline</span> Sprints & Gantt
                </a>
                <a asp-controller="Calendar" asp-action="Manager" class="menu-item action @(currentController == "Calendar" ? "active" : "")">
                    <span class="material-icons">calendar_today</span> Corporate Calendar
                </a>
                <a asp-controller="Requests" asp-action="Manager" class="menu-item action @(currentController == "Requests" ? "active" : "")">
                    <span class="material-icons">description</span> Requests
                </a>
            }
            else if (currentProfile == "Rh")
            {
                <a asp-controller="Colaboradores" asp-action="Rh" class="menu-item action @(currentController == "Colaboradores" ? "active" : "")">
                    <span class="material-icons">people</span> Collaborators
                </a>
                <a asp-controller="Sprint" asp-action="Rh" class="menu-item action @(currentController == "Sprint" ? "active" : "")">
                    <span class="material-icons">timeline</span> Sprints & Gantt
                </a>
                <a asp-controller="Calendar" asp-action="Rh" class="menu-item action @(currentController == "Calendar" ? "active" : "")">
                    <span class="material-icons">calendar_today</span> Corporate Calendar
                </a>
                <a asp-controller="Requests" asp-action="Rh" class="menu-item action @(currentController == "Requests" ? "active" : "")">
                    <span class="material-icons">description</span> Requests
                </a>
            }
            else if (currentProfile == "Colaborador")
            {
                <a asp-controller="Colaboradores" asp-action="Colaborador" class="menu-item action @(currentController == "Colaboradores" ? "active" : "")">
                    <span class="material-icons">people</span> Collaborators
                </a>
                <a asp-controller="Sprint" asp-action="Colaborador" class="menu-item action @(currentController == "Sprint" ? "active" : "")">
                    <span class="material-icons">timeline</span> Sprints & Gantt
                </a>
                <a asp-controller="Calendar" asp-action="Colaborador" class="menu-item action @(currentController == "Calendar" ? "active" : "")">
                    <span class="material-icons">calendar_today</span> Corporate Calendar
                </a>
                <a asp-controller="Requests" asp-action="Colaborador" class="menu-item action @(currentController == "Requests" ? "active" : "")">
                    <span class="material-icons">description</span> Requests
                </a>
            }
        </div>

        <div class="bottom-menu p-3">
            <a asp-controller="Account" asp-action="ChangePassword" class="menu-item">
                <span class="material-icons">vpn_key</span> <span class="text-warning">Change Password</span>
            </a>

            <a asp-controller="Login" asp-action="Logout" class="menu-item">
                <span class="material-icons">logout</span> Log Out
            </a>
        </div>
    </div>
   
    <div class="flex-grow-1 p-4 bg-light h-100 overflow-y-auto">
        @RenderBody()
    </div>

</body>
</html>